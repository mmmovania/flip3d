FLIP-based liquid solver introduced by Ando&Tsuruno in SCA 2011. There's no dependencies: only standard C functions like fprintf() are used to compute everything. Here's an animation generated by this code:

<a href='http://www.youtube.com/watch?feature=player_embedded&v=SxGb27IC-Mk' target='_blank'><img src='http://img.youtube.com/vi/SxGb27IC-Mk/0.jpg' width='425' height=344 /></a>

If you download Sunflow renderer you get something like this:

<a href='http://www.youtube.com/watch?feature=player_embedded&v=5KMCWmfkdmE' target='_blank'><img src='http://img.youtube.com/vi/5KMCWmfkdmE/0.jpg' width='425' height=344 /></a>

Each time step took less than 30 seconds at 128^3 resolution. <br>
Enjoy.